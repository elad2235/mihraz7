<link
  rel="stylesheet"
  href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
  integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh"
  crossorigin="anonymous"
/>
<link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
/>
<link
  rel="stylesheet"
  href="https://cdn.datatables.net/1.10.20/css/jquery.dataTables.min.css"
/>
<script src="https://code.jquery.com/jquery-3.3.1.js"></script>
<script src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js"></script>
<style></style>
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Home Page</title>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <a class="navbar-brand" href="#">Mihraz-7</a>
      <button
        class="navbar-toggler"
        type="button"
        data-toggle="collapse"
        data-target="#navbarNav"
        aria-controls="navbarNav"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link" href="{% url 'homePage' %}"
              >Home <span class="sr-only">(current)</span></a
            >
          </li>
          <li class="nav-item">
            <a class="nav-link" href="{% url 'Tender' %}">Open Tenders</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="{% url 'CloseTenders' %}">Close Tenders</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="{% url 'supp_page' %}">Suppliers</a>
          </li>
        </ul>
      </div>
      <a class="nav-link" href="{% url 'contact_us' %}">Contact us</a>
      <a class="nav-link" href="{% url 'account_logout' %}">logOut</a>
    </nav>
    <br><br>
    <div class="tenders">
      <div class="container">
        <div class="row">
          <div class="col-12">
            <table id="1234" class="table table-bordered">
              <thead>
                <tr>
                  <th scope="col">Tender Name</th>
                  <th scope="col">Tender Id</th>
                  <th scope="col">Files</th>
                  <th scope="col">Online Payment</th>
                  <th scope="col">Url</th>
                  <th scope="col">Update Date</th>
                  <th scope="col">End Date</th>
                  <th scope="col">New Offer</th>
                  <th scope="col">_________________</th>
                  <th scope="col">Count of applied</th>
                </tr>
              </thead>
              <tbody>
                {% for tender in tenders %}
                <form action="/tenders/RegisterOffer/" method="POST">
                  {% csrf_token %}
                  <div class="tender">
                    <tr>
                      <th scope="row">{{ tender.tender_name }}</th>
                      <td>{{ tender.tender_id }}</td>
                      <td>{{ tender.files }}</td>
                      <td>{{ tender.online_payment }}</td>
                      <td>
                        <a href="{{ tender.url }}" target="_blank">link</a>
                      </td>
                      <td>{{ tender.update_date }}</td>
                      <td>{{ tender.end_date }}</td>
                      <td>
                        <div class="input-group mb-3">
                          <input
                            type="number"
                            name="Offer"
                            class="form-control"
                            placeholder="My Offer"
                            aria-label="Recipient's username"
                            aria-describedby="basic-addon2"
                          />
                        </div>
                      </td>
                      <td>
                        <button
                          type="submit"
                          name="tenId"
                          class="btn btn-success fa fa-edit"
                          value="{{ tender.tender_id }}"
                        ></button>
                        <button
                          type="submit"
                          name="tenIdDelete"
                          class="btn btn-danger fa fa-trash"
                          value="{{ tender.tender_id }}"
                        ></button>
                        <div class="tenderId">
                          {% if tender.tender_id == tenderId %}
                          <div class="message">{{ message }}</div>
                          {% endif %}
                        </div>
                      </td>
                      <td>{{ tender.Count_of_applied }}</td>
                    </tr>
                  </div>
                </form>
                {% endfor %}
              </tbody>
              <script>
                $(document).ready(function () {
                  $("#1234").DataTable({
                    initComplete: function () {
                      this.api()
                        .columns()
                        .every(function () {
                          var column = this;
                          var select = $(
                            '<select><option value=""></option></select>'
                          )
                            .appendTo($(column.footer()).empty())
                            .on("change", function () {
                              var val = $.fn.dataTable.util.escapeRegex(
                                $(this).val()
                              );

                              column
                                .search(val ? "^" + val + "$" : "", true, false)
                                .draw();
                            });

                          column
                            .data()
                            .unique()
                            .sort()
                            .each(function (d, j) {
                              select.append(
                                '<option value="' + d + '">' + d + "</option>"
                              );
                            });
                        });
                    },
                  });
                });
              </script>
            </table>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
